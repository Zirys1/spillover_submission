{
    "collab_server" : "",
    "contents" : "base <- here::here()\nsetwd(paste0(base, \"/raw/\"))\n\nload(\"raw.RData\")\nlibrary(dplyr)\nlibrary(scales)\n#### Remove subjets that did read either article in less than mean - 2*sd time ####\n## Treatment text (120 sec)\ndf$TimeIchHabeDenTextGelesenUndVerstandenQuotenoIdOK <- ifelse(df$treatment == 0, NA, df$TimeIchHabeDenTextGelesenUndVerstandenQuotenoIdOK)\ndf$TimeWeiterQuotenoIdOK <- ifelse(df$treatment == 0, NA, df$TimeWeiterQuotenoIdOK) # since this variable is not important for subjects in the control, this is set to NA\n\ndf$tf_t_c <- ifelse( # mark subjects as \"too fast\" (conservative, when clicking \"Have read and understood\")\n  df$treatment == 1 & (120 - df$TimeIchHabeDenTextGelesenUndVerstandenQuotenoIdOK < (mean(120 - df$TimeIchHabeDenTextGelesenUndVerstandenQuotenoIdOK, na.rm = T) - 2*sd(120 - df$TimeIchHabeDenTextGelesenUndVerstandenQuotenoIdOK, na.rm = T))), 1,0\n)\n\ndf$tf_t_l <- ifelse( # mark subjects as \"too fast\" (liberal, when proceeding to next screen)\n  df$treatment == 1 & (120 - df$TimeWeiterQuotenoIdOK < (mean(120 - df$TimeWeiterQuotenoIdOK, na.rm = T) - 2*sd(120 - df$TimeWeiterQuotenoIdOK, na.rm = T))), 1,0\n)\n\n## ZO text (300 sec)\ndf$TimeIchHabeDenTextAufmerksamGelesenZOOK <- ifelse(df$ZO_order == 1, df$TimeIchHabeDenTextAufmerksamGelesenZOOK, NA)\ndf$TimeWeiterZOOK <- ifelse(df$ZO_order == 1, df$TimeWeiterZOOK, NA)\ndf$TimeIchHabeDenTextAufmerksamGelesenZO2OK <- ifelse(df$ZO_order == 0, df$TimeIchHabeDenTextAufmerksamGelesenZO2OK, NA)\ndf$TimeWeiterZO2OK <- ifelse(df$ZO_order == 0, df$TimeWeiterZO2OK, NA)\n\n\ndf$tf_ZO_c <- ifelse( # mark subjects as \"too fast\" (conservative, when clicking \"Have read and understood\")\n  df$treatment == 1 & (300 - df$TimeIchHabeDenTextAufmerksamGelesenZOOK < (mean(300 - df$TimeIchHabeDenTextAufmerksamGelesenZOOK, na.rm = T) - 2*sd(300 - df$TimeIchHabeDenTextAufmerksamGelesenZOOK, na.rm = T))), 1,0\n)\n\ndf$tf_ZO_l <- ifelse( # mark subjects as \"too fast\" (liberal, when proceeding to next screen)\n  df$treatment == 1 & (300 - df$TimeWeiterZOOK < (mean(300 - df$TimeWeiterZOOK, na.rm = T) - 2*sd(300 - df$TimeWeiterZOOK, na.rm = T))), 1,0\n)\n\ndf$tf_ZO2_c <- ifelse( # mark subjects as \"too fast\" (conservative, when clicking \"Have read and understood\")\n  df$treatment == 1 & (300 - df$TimeIchHabeDenTextAufmerksamGelesenZO2OK < (mean(300 - df$TimeIchHabeDenTextAufmerksamGelesenZO2OK, na.rm = T) - 2*sd(300 - df$TimeIchHabeDenTextAufmerksamGelesenZO2OK, na.rm = T))), 1,0\n)\n\ndf$tf_ZO2_l <- ifelse( # mark subjects as \"too fast\" (liberal, when proceeding to next screen)\n  df$treatment == 1 & (300 - df$TimeWeiterZO2OK < (mean(300 - df$TimeWeiterZO2OK, na.rm = T) - 2*sd(300 - df$TimeWeiterZO2OK, na.rm = T))), 1,0\n)\n\n\n\n## Source text (300 sec)\ndf$TimeIchHabeDenTextAufmerksamGelesenZOsourceOK <- ifelse(df$ZO_order == 0, df$TimeIchHabeDenTextAufmerksamGelesenZOsourceOK, NA)\ndf$TimeWeiterZOsourceOK <- ifelse(df$ZO_order == 0, df$TimeWeiterZOsourceOK, NA)\ndf$TimeIchHabeDenTextAufmerksamGelesenZOsource2OK <- ifelse(df$ZO_order == 1, df$TimeIchHabeDenTextAufmerksamGelesenZOsource2OK, NA)\ndf$TimeWeiterZOsource2OK <- ifelse(df$ZO_order == 1, df$TimeWeiterZOsource2OK, NA)\n\ndf$tf_ZOs_c <- ifelse( # mark subjects as \"too fast\" (conservative, when clicking \"Have read and understood\")\n  df$treatment == 1 & (300 - df$TimeIchHabeDenTextAufmerksamGelesenZOsourceOK < (mean(300 - df$TimeIchHabeDenTextAufmerksamGelesenZOsourceOK, na.rm = T) - 2*sd(300 - df$TimeIchHabeDenTextAufmerksamGelesenZOsourceOK, na.rm = T))), 1,0\n)\n\ndf$tf_ZOs_l <- ifelse( # mark subjects as \"too fast\" (liberal, when proceeding to next screen)\n  df$treatment == 1 & (300 - df$TimeWeiterZOsourceOK < (mean(300 - df$TimeWeiterZOsourceOK, na.rm = T) - 2*sd(300 - df$TimeWeiterZOsourceOK, na.rm = T))), 1,0\n)\n\ndf$tf_ZO2s_c <- ifelse( # mark subjects as \"too fast\" (conservative, when clicking \"Have read and understood\")\n  df$treatment == 1 & (300 - df$TimeIchHabeDenTextAufmerksamGelesenZOsource2OK < (mean(300 - df$TimeIchHabeDenTextAufmerksamGelesenZOsource2OK, na.rm = T) - 2*sd(300 - df$TimeIchHabeDenTextAufmerksamGelesenZOsource2OK, na.rm = T))), 1,0\n)\n\ndf$tf_ZO2s_l <- ifelse( # mark subjects as \"too fast\" (liberal, when proceeding to next screen)\n  df$treatment == 1 & (300 - df$TimeWeiterZOsource2OK < (mean(300 - df$TimeWeiterZOsource2OK, na.rm = T) - 2*sd(300 - df$TimeWeiterZOsource2OK, na.rm = T))), 1,0\n)\n\n#### Exclusion of observation if too fast ####\ndfr <- df %>% # puts those that would have to be excluded from the data frame in the dfr data frame\n  filter(tf_ZO2s_l == 1 | df$tf_ZOs_l == 1 | df$tf_ZO2_l == 1 | df$tf_ZO_l == 1)\n\ndf <- df[!(df$id == dfr$id[1]),] # excludes those ids that are in dfr from df (still need to verify if it works for multiple TRUEs)\ndf <- df[!(df$id == dfr$id[2]),] # excludes those ids that are in dfr from df (still need to verify if it works for multiple TRUEs)\n\n#### Code treatment as factor ####\ndf$treatment <- factor(df$treatment, levels = c(0,1), labels = c(\"no quote\", \"quote\"))\n#df$treatmentR <- rescale(df$treatment, binary.inputs = \"-0.5,0.5\")\n#df$treatmentR <- as.factor(df$treatmentR)\n\n\n#### Create M_trust and S_trust (dependent variables) as ordered factors\ndf$M_trust <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_tru, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_tru3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$so_tru3, NA\n      )\n  )\n)\ndf$S_trust <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_tru2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_tru1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$so_tru2, NA\n    )\n  )\n)\n\ndf$M_trust <- factor(df$M_trust, levels = c(1:5), ordered = T)\ndf$S_trust <- factor(df$S_trust, levels = c(1:5), ordered = T)\n\n#### Create M_dep and S_dep (dependent variables) as ordered factors\ndf$M_dep <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_dep, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_dep3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$so_dep3, NA\n    )\n  )\n)\ndf$S_dep <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_dep2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_dep1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$so_dep2, NA\n    )\n  )\n)\n\ndf$M_dep <- factor(df$M_dep, levels = c(1:5), ordered = T)\ndf$S_dep <- factor(df$S_dep, levels = c(1:5), ordered = T)\n\n#### Create M_hon and S_hon (dependent variables) as ordered factors\ndf$M_hon <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_hon, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_hon3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$so_hon3, NA\n    )\n  )\n)\ndf$S_hon <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_hon2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_hon1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$so_hon2, NA\n    )\n  )\n)\n\ndf$M_hon <- factor(df$M_hon, levels = c(1:5), ordered = T)\ndf$S_hon <- factor(df$S_hon, levels = c(1:5), ordered = T)\n\n#### Create M_rel and S_rel (dependent variables) as ordered factors\ndf$M_rel <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_rel, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_rel3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$so_rel3, NA\n    )\n  )\n)\ndf$S_rel <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_rel2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_rel1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$so_rel2, NA\n    )\n  )\n)\n\ndf$M_rel <- factor(df$M_rel, levels = c(1:5), ordered = T)\ndf$S_rel <- factor(df$S_rel, levels = c(1:5), ordered = T)\n\n#### Create M_sin and S_sin (dependent variables) as ordered factors\ndf$M_sin <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_sin, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_sin3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$so_sin3, NA\n    )\n  )\n)\ndf$S_sin <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_sin2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_sin1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$so_sin2, NA\n    )\n  )\n)\n\ndf$M_sin <- factor(df$M_sin, levels = c(1:5), ordered = T)\ndf$S_sin <- factor(df$S_sin, levels = c(1:5), ordered = T)\n\n#### Create M_exp and S_exp (dependent variables) as ordered factors\ndf$M_exp <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_exp, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_exp3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$so_exp3, NA\n    )\n  )\n)\ndf$S_exp <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_exp2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_exp1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$so_exp2, NA\n    )\n  )\n)\n\ndf$M_exp <- factor(df$M_exp, levels = c(1:5), ordered = T)\ndf$S_exp <- factor(df$S_exp, levels = c(1:5), ordered = T)\n\n#### Create M_expd and S_expd (dependent variables) as ordered factors\ndf$M_expd <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_expd, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_expd3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$so_expd3, NA\n    )\n  )\n)\ndf$S_expd <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_expd2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_expd1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$so_expd2, NA\n    )\n  )\n)\n\ndf$M_expd <- factor(df$M_expd, levels = c(1:5), ordered = T)\ndf$S_expd <- factor(df$S_expd, levels = c(1:5), ordered = T)\n\n#### Create M_kno and S_kno (dependent variables) as ordered factors\ndf$M_kno <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_kno, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_kno3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$so_kno3, NA\n    )\n  )\n)\ndf$S_kno <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_kno2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_kno1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$so_kno2, NA\n    )\n  )\n)\n\ndf$M_kno <- factor(df$M_kno, levels = c(1:5), ordered = T)\ndf$S_kno <- factor(df$S_kno, levels = c(1:5), ordered = T)\n\n#### Create M_qua and S_qua (dependent variables) as ordered factors\ndf$M_qua <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_qua, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_qua3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$so_qua3, NA\n    )\n  )\n)\ndf$S_qua <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_qua2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_qua1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$so_qua2, NA\n    )\n  )\n)\n\ndf$M_qua <- factor(df$M_qua, levels = c(1:5), ordered = T)\ndf$S_qua <- factor(df$S_qua, levels = c(1:5), ordered = T)\n\n#### Create M_ski and S_ski (dependent variables) as ordered factors\ndf$M_ski <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_ski, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_ski3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$so_ski3, NA\n    )\n  )\n)\ndf$S_ski <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$so_ski2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$so_ski1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$so_ski2, NA\n    )\n  )\n)\n\ndf$M_ski <- factor(df$M_ski, levels = c(1:5), ordered = T)\ndf$S_ski <- factor(df$S_ski, levels = c(1:5), ordered = T)\n\n#### Create M_acc and S_acc (dependent variables) as ordered factors\ndf$M_acc <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$co_acc, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$co_acc3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$co_acc3, NA\n    )\n  )\n)\ndf$S_acc <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$co_acc2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$co_acc1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$co_acc2, NA\n    )\n  )\n)\n\ndf$M_acc <- factor(df$M_acc, levels = c(1:5), ordered = T)\ndf$S_acc <- factor(df$S_acc, levels = c(1:5), ordered = T)\n\n#### Create M_bel and S_bel (dependent variables) as ordered factors\ndf$M_bel <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$co_bel, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$co_bel3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$co_bel3, NA\n    )\n  )\n)\ndf$S_bel <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$co_bel2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$co_bel1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$co_bel2, NA\n    )\n  )\n)\n\ndf$M_bel <- factor(df$M_bel, levels = c(1:5), ordered = T)\ndf$S_bel <- factor(df$S_bel, levels = c(1:5), ordered = T)\n\n#### Create M_fac and S_fac (dependent variables) as ordered factors\ndf$M_fac <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$co_fac, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$co_fac3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$co_fac3, NA\n    )\n  )\n)\ndf$S_fac <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$co_fac2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$co_fac1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$co_fac2, NA\n    )\n  )\n)\n\ndf$M_fac <- factor(df$M_fac, levels = c(1:5), ordered = T)\ndf$S_fac <- factor(df$S_fac, levels = c(1:5), ordered = T)\n\n#### Create M_tru and S_tru (dependent variables) as ordered factors\ndf$M_tru <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$co_tru, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$co_tru3, ifelse(\n      df$session == 1 & df$ZO_order == 0, df$co_tru3, NA\n    )\n  )\n)\ndf$S_tru <- ifelse(\n  df$session > 1 & df$ZO_order == 1, df$co_tru2, ifelse(\n    df$session > 1 & df$ZO_order == 0, df$co_tru1, ifelse(\n      df$session == 1 & df$ZO_order == 1, df$co_tru2, NA\n    )\n  )\n)\n\ndf$M_tru <- factor(df$M_tru, levels = c(1:5), ordered = T)\ndf$S_tru <- factor(df$S_tru, levels = c(1:5), ordered = T)\n\n\n####Perceived source trustworthiness scale ####\ndf$M_trust_scale <- as.numeric(df$M_dep) + as.numeric(df$M_hon) + as.numeric(df$M_rel) + as.numeric(df$M_sin) + as.numeric(df$M_trust)\ndf$S_trust_scale <- as.numeric(df$S_dep) + as.numeric(df$S_hon) + as.numeric(df$S_rel) + as.numeric(df$S_sin) + as.numeric(df$S_trust)\n\n\n#### Perceived source expertise scale ####\ndf$M_exp_scale <- as.numeric(df$M_exp) + as.numeric(df$M_expd)  + as.numeric(df$M_kno) + as.numeric(df$M_qua) + as.numeric(df$M_ski)\ndf$S_exp_scale <- as.numeric(df$S_exp) + as.numeric(df$S_expd)  + as.numeric(df$S_kno) + as.numeric(df$S_qua) + as.numeric(df$S_ski)\n\n#### Perceived content credibility ####\ndf$M_contcred_scale <- as.numeric(df$M_acc) + as.numeric(df$M_bel) + as.numeric(df$M_fac) + as.numeric(df$M_tru)\ndf$S_contcred_scale <- as.numeric(df$S_acc) + as.numeric(df$S_bel) + as.numeric(df$S_fac) + as.numeric(df$S_tru)\n\n\n## Gender as factor ##\ndf$Gender <- factor(df$Gender, levels = c(0,1), labels = c(\"Female\", \"Male\"))\n\n## StudyArea as factor ##\ndf$StudyArea <- as.factor(ifelse(df$StudyArea == 1, \"Economics\", \n                                  ifelse(df$StudyArea == 2, \"Law\", \n                                         ifelse(df$StudyArea == 3, \"Social Science\",\n                                                ifelse(df$StudyArea == 4, \"Management\",\n                                                       ifelse(df$StudyArea == 5, \"Philosophy\",\n                                                              ifelse(df$StudyArea == 6, \"History\",\n                                                                     \"Other\")))))))\n\n\n# Correcting two contribution amounts that were reported by participants to be a mistake\n# In both cases, they wanted to contribute 0 instead of 8,. Clicked default by mistake. I also have to correct usedDefault\ndf$contribution[df$id == \"61\"] <- 0\ndf$contribution[df$id == \"58\"] <- 0\n\n# Correcting two contribution amounts that were reported by participants to be a mistake\n# clicked default by mistake\ndf$contribution[df$id == \"95\"] <- 3\ndf$contribution[df$id == \"96\"] <- 2\n\n# Correcting two contribution amounts that were reported by participants to be a mistake\n# clicked default by mistake\ndf$contribution[df$id == \"126\"] <- 2\ndf$contribution[df$id == \"135\"] <- 2\n\ndf$quote_perc <- ifelse(df$quote_perc == 0, NA, df$quote_perc)\nlevels(df$treatment) <- c(\"No Quote\", \"Quote\")\n#### Safe ####\n\nwrite.xlsx(as.data.frame(df), paste0(base, \"/data/\" , \"full.xlsx\"))\nsave.image(paste0(base, \"/data/\" , \"full.RData\"))\nlibrary(foreign)\nwrite.dta(as.data.frame(df), paste0(base, \"/data/\" , \"full.dta\"))\n",
    "created" : 1519745497921.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3933291823",
    "id" : "9A4A835E",
    "lastKnownWriteTime" : 1519746491,
    "last_content_update" : 1519746491174,
    "path" : "Z:/Projects/R Projects/spillover_submission/scripts/preparation.R",
    "project_path" : "scripts/preparation.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}